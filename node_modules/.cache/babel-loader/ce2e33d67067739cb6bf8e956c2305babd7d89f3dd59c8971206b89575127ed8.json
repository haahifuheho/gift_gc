{"ast":null,"code":"import _regeneratorRuntime from\"/home/ookusa/app/gift_gc/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/home/ookusa/app/gift_gc/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/home/ookusa/app/gift_gc/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState}from\"react\";import Web3 from'web3';import GiftNFT from\"./contracts/GiftNFT.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){return _App.apply(this,arguments);}function _App(){_App=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _useState,_useState2,message,setMessage,_useState3,_useState4,recipient,setRecipient,_useState5,_useState6,tokenId,setTokenId,web3,accounts,defaultAccount,contractAddress,contract,giftNFT;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];_useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),recipient=_useState4[0],setRecipient=_useState4[1];_useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),tokenId=_useState6[0],setTokenId=_useState6[1];web3=new Web3(window.ethereum);_context2.next=6;return web3.eth.requestAccounts();case 6:accounts=_context2.sent;defaultAccount=accounts[0];contractAddress=\"0xaed8166414dc429365e56e3b873c1d651879d154\";// コントラクトアドレスを入力\ncontract=new web3.eth.Contract(GiftNFT.abi,contractAddress,{from:defaultAccount});giftNFT=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var tx,event,newTokenId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return contract.methods.giftNFT(recipient,message).send({from:defaultAccount});case 3:tx=_context.sent;event=tx.events[0];newTokenId=event.args[2].toNumber();setTokenId(newTokenId);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function giftNFT(){return _ref.apply(this,arguments);};}();return _context2.abrupt(\"return\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Gift NFT\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Message:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setMessage(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Recipient:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setRecipient(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:giftNFT,children:\"Gift\"}),tokenId&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Gifted NFT with Token ID: \",tokenId]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Message: \",message]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Recipient: \",recipient]})]})]}));case 12:case\"end\":return _context2.stop();}},_callee2);}));return _App.apply(this,arguments);}export default App;","map":{"version":3,"names":["React","useState","Web3","GiftNFT","jsx","_jsx","jsxs","_jsxs","App","_App","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","_useState","_useState2","message","setMessage","_useState3","_useState4","recipient","setRecipient","_useState5","_useState6","tokenId","setTokenId","web3","accounts","defaultAccount","contractAddress","contract","giftNFT","wrap","_callee2$","_context2","prev","next","_slicedToArray","window","ethereum","eth","requestAccounts","sent","Contract","abi","from","_ref","_callee","tx","event","newTokenId","_callee$","_context","methods","send","events","args","toNumber","t0","console","error","stop","abrupt","children","type","onChange","e","target","value","onClick"],"sources":["/home/ookusa/app/gift_gc/src/App.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Web3 from 'web3';\nimport GiftNFT from \"./contracts/GiftNFT.json\";\n\nasync function App() {\n  const [message, setMessage] = useState(\"\");\n  const [recipient, setRecipient] = useState(\"\");\n  const [tokenId, setTokenId] = useState(\"\");\n\n  const web3 = new Web3(window.ethereum);\n  const accounts = await web3.eth.requestAccounts();\n  const defaultAccount = accounts[0];\n  \n  const contractAddress = \"0xaed8166414dc429365e56e3b873c1d651879d154\"; // コントラクトアドレスを入力\n  const contract = new web3.eth.Contract(GiftNFT.abi, contractAddress, { from: defaultAccount });\n  \n  const giftNFT = async () => {\n    try {\n      const tx = await contract.methods.giftNFT(recipient, message).send({ from: defaultAccount });\n      const event = tx.events[0];\n      const newTokenId = event.args[2].toNumber();\n      setTokenId(newTokenId);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Gift NFT</h1>\n      <label>\n        Message:\n        <input type=\"text\" onChange={(e) => setMessage(e.target.value)} />\n      </label>\n      <br />\n      <label>\n        Recipient:\n        <input type=\"text\" onChange={(e) => setRecipient(e.target.value)} />\n      </label>\n      <br />\n      <button onClick={giftNFT}>Gift</button>\n      {tokenId && (\n        <div>\n          <p>Gifted NFT with Token ID: {tokenId}</p>\n          <p>Message: {message}</p>\n          <p>Recipient: {recipient}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}